<DOCTYPE html/>

<html>
	<head>
		<meta name="google-signin-client_id" content="192634648100-opv5otafun1ob43i9fgnn2vl8dv8emgm.apps.googleusercontent.com">

		<script src="https://apis.google.com/js/platform.js" async defer></script>
		<style>
			body {
				background-color: white;
				width: 100%;
				height: 100%;
				display: flex;
				justify-content: center;
				align-items: center;
				overflow-x: hidden;
				overflow-y: hidden;
			}
		</style>
	</head>

	<body>
	<div id="my-signin2"></div>
	<script>

		function onSuccess(googleUser) {
			console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
			console.log(googleUser["wc"]["access_token"]);
			console.log(googleUser["Tt"]["Du"]);
			console.log(googleUser);
			var accessToken = googleUser["wc"]["access_token"]
			var email = googleUser["Tt"]["Du"];

			fetch("/google/login/pass/" + accessToken).then(response => {
				if(response.status === 200) {
					console.log("OK.");
				}
			})


		}
		function onFailure(error) {
			console.log(error);
		}
		function renderButton() {
			gapi.load('auth2', function() {
				auth2 = gapi.auth2.init({
					client_id: '192634648100-opv5otafun1ob43i9fgnn2vl8dv8emgm.apps.googleusercontent.com',
					cookiepolicy: 'single_host_origin'
				});
			});
			gapi.signin2.render('my-signin2', {
				'scope': 'profile email',
				'width': 240,
				'height': 50,
				'longtitle': true,
				'theme': 'dark',
				'onsuccess': onSuccess,
				'onfailure': onFailure
			});
		}
	</script>

	<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
	</body>
</html>